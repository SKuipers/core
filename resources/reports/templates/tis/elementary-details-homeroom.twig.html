{#<!--
name: Elementary Homeroom
category: Elementary
types: Body
sources:
    student: Student
    families: Families
    homeroom: RollGroupCriteria
    tutors: Tutors
config:
    showIfEmpty:
        label: Show if empty?
        type: yesno
        default: Y
    homeLanguages:
        label: Show home languages?
        type: yesno
        default: Y
    fontSize:
        label: Font Size
        type: number
        default: 11.4
-->#}
{{- stylesheet ? include(stylesheet) -}}
<style>
    .header {
        font-size: 9pt ;
        font-weight: bold;
        background-color: {{ 'N' in student.yearGroupNameShort or 'K' in student.yearGroupNameShort ? '#bee4fa' : '#AAAAAA' }};
        vertical-align: middle;
    }

    .comment {
        font-size: {{ config.fontSize|default(11.4) }}pt ;
        line-height: 1.4;
        text-align: justified;
    }
</style>
{% if homeroom or config.showIfEmpty == 'Y' %}
<table cellspacing="0" cellpadding="4">
    <tr>
        <td class="header border-top border-bottom border-left" style="width:50%;line-height:3;" colspan="1">  HOMEROOM COMMENTS</td>
        <td class="header border-top border-bottom border-right" style="width:50%;line-height:3;text-align:right;" colspan="1">
            {% set teacher = tutors|first %}
            {{ teacher.title }} {{ teacher.preferredName|first }}. {{ teacher.surname }}
        </td>
    </tr>

    <tr>
        <td class="border" colspan="2"><table cellpadding="6" >
            {%- set studentComment = homeroom.perStudent|first -%}
            {% if studentComment.valueType == 'Comment' %}
                <tr nobr="true">
                    <td class="comment">{%- if studentComment.criteriaName %}<b>{{ studentComment.criteriaName|title }}:</b><br/>{% endif -%}
                    <span style="font-family:DroidSansFallback;">{{ studentComment.comment -}}</span></td>
                </tr>
            {% endif %}

            {%- set studentComment2 = homeroom.perStudent[1] -%}
            {% if studentComment2.valueType == 'Comment' %}
                <tr nobr="true">
                    <td class="comment">{%- if studentComment2.criteriaName %}<b>{{ studentComment2.criteriaName|title }}:</b><br/>{% endif -%}
                    <span style="font-family:DroidSansFallback;">{{ studentComment2.comment -}}</span></td>
                </tr>
            {% endif %}

            {% set family = families|first %}
            {% if config.homeLanguages == 'Y' and family.languageHomePrimary %}
            <tr nobr="true">
                <td class="comment"><b>Home Language:</b><br/>
                <span style="font-family:DroidSansFallback;">
                    {%- if family.languageHomePrimary and family.languageHomeSecondary and (family.languageHomePrimary != family.languageHomeSecondary) -%}
                        In {{ student.preferredName }}’s home the following languages are spoken: {{ family.languageHomePrimary }} and {{ family.languageHomeSecondary }}.
                    {%- else -%}
                        In {{ student.preferredName }}’s home the following language is spoken: {{ family.languageHomePrimary }}.
                    {%- endif -%}
                </span></td>
            </tr>
            {% endif %}

            {% if studentProgression and studentProgression.progression == 'Y' %}
            <tr nobr="true">
                <td class="comment"><b>Student Progression:</b><br/>
                <span style="font-family:DroidSansFallback;">{{ student.preferredName }} has been promoted to {{ studentProgression.grade }}.</span></td>
            </tr>
            {% endif %}
        </table></td>
    </tr>
      
</table>
{% endif %}
