{#<!--
name: Secondary Student Details
category: Secondary
types: Body
sources:
    student: Student
    customFields: CustomFields
    report: Report
    reportingCycle: ReportingCycle
    tutors: Tutors
    termGrades: TermGrades
config:
    reportNames:
        label: Report Names
        type: text
        default: Term 1 Interim,Term 1 End,Term 2 Interim,Term 2 End
-->#}
{{- stylesheet ? include(stylesheet) -}}
<style>
    .header {
        font-size: 9pt ;
        background-color: #AAAAAA;
        vertical-align: middle;
    }

    .title {
        font-size: 12pt ;
        font-weight: bold;
        text-align: center;
        line-height: 1;
    }

    .student {
        font-size: 11.6pt ;
        text-align: left;
        line-height: 4;
    }

    .term {
        font-size: 9pt ;
        line-height: 1.4;
    }
</style>
<table cellspacing="0" cellpadding="0">
    <tr>
        <td class="title">Secondary School - {{ reportingCycle.nameShort }} Progress Report</td>
    </tr>
</table>
<table cellspacing="0" cellpadding="0">
    <tr>
        <td class="student"><b>Student:</b> {{ student.surname }}, {{ student.firstName }} {% if student.firstName != student.preferredName %}({{ student.preferredName }}){% endif %}</td>
    </tr>
</table>
<table cellspacing="0" cellpadding="4">
    <tr>
        {% set colspan = 2 %}
        <td class="header border-top border-bottom border-left" style="width:25%" colspan="1"><b>Student ID:</b> {{ student.studentID }}</td>
        {% if customFields["Alberta Student Number"] %}
            <td class="header border-top border-bottom" style="width:25%" colspan="1"><b>Alberta ID:</b> {{ customFields["Alberta Student Number"] }}</td>
            {% set colspan = 1 %}
        {% endif %}
        <td class="header border-top border-bottom" style="width:25%" colspan="1"><b>Class:</b> {{ student.rollGroupName }}</td>
        <td class="header border-top border-bottom border-right" style="width:{{ colspan == 2 ? '50' : '25' }}%;text-align: right;" colspan="{{ colspan }}">
            {%- set advisor = tutors|first -%}
            <b>Advisor:</b> {{ advisor.title }} {{ advisor.preferredName|first }}. {{ advisor.surname }}
        </td>
    </tr>
    
    {% if reportingCycle %}

    {% set reportNames = config.reportNames|default('Term 1 Interim,Term 1 End,Term 2 Interim,Term 2 End')|split(',') %}

    <tr>
        {% set grades = termGrades.terms %}
        {% set colWidth = 100 / reportingCycle.cycleTotal|default(1) %}

        {% for cycleNum in range(1, reportingCycle.cycleTotal|default(1)) %}
        <td class="border" style="width:{{ colWidth }}%"><table cellspacing="0" cellpadding="0">
                <tr>
                    <td colspan="2" class="term"><b>{{- reportNames[cycleNum-1] -}}</b></td>
                </tr>
                {% if reportingCycle.cycleNumber > 1 and grades[cycleNum] is not empty %}
                <tr>
                    <td colspan="2" class="term" style="line-height:2.5">{% if grades[cycleNum].status and (cycleNum == 2 or cycleNum == 3 or cycleNum == 4)  %}{{- grades[cycleNum].status -}}{% endif %}</td>
                </tr>
                {% endif %}
            </table>
        </td>
        {% endfor %}
    </tr>
    {% endif %}
    
</table>
